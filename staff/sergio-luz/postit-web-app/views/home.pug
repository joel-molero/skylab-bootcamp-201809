extends layout
block content
      div(class='navbar--horizontal')
        p Welcome #{name}!
        a(href='/logout') logout
      .container
        form(method='POST', action='/postits')
          input(type='text', name='text')
          button(type='submit', value='add', name='operation') Add
        if error
          p(class='error') #{error}
        if postits.length  
          ul
            each postit in postits
              li(class='post')
                if (postitId != postit.id)
                  div(class='postit')
                    textarea(disabled=true, class='postit__text') #{postit.text}
                    form(method='POST', action='/postits' class='postit__buttons')
                      input(type='hidden', value=postit.id, name='postitId')
                      button( type='submit', value='edit', name='operation') Edit
                      button(class='button--red' type='submit', value='remove', name='operation') Remove
                else
                  form(method='POST', action='/postits' class='postit__buttons')
                    input(type='text', value=postit.text, name='text', class='postit__text')
                    input(type='hidden', value=postit.id, name='postitId')
                    button(class='button--green' type='submit', value='save', name='operation') Save
                    button(class='button--red' type='submit', value='remove', name='operation') Remove